name: Build contracts and release  # name it whatever you like
on:
  workflow_dispatch:
    inputs:
      release_name:
        description: 'Unique release name'
        required: true
        type: string
jobs:
  release-soroswap-factory:
    uses: stellar-expert/soroban-build-workflow/.github/workflows/release.yml@main
    with:
      release_name: ${{ github.ref_name }}                      # use git tag as unique release name
      release_description: 'Soroswap factory contract release'  # some boring placeholder text to attach
      relative_path: '["contracts/factory"]'                    # relative path to your really awesome contract
      package: 'Soroswap-factory'                               # package name to build
      make_target: 'contracts/factory/Makefile'                 # make target to invoke
    secrets:  # the authentication token will be automatically created by GitHub
      release_token: ${{ secrets.GITHUB_TOKEN }}                # don't modify this line
  release-soroswap-library:
    uses: stellar-expert/soroban-build-workflow/.github/workflows/release.yml@main
    with:
      release_name: ${{ github.ref_name }}                      # use git tag as unique release name
      release_description: 'Soroswap library contract release'  # some boring placeholder text to attach
      relative_path: '["contracts/library"]'                    # relative path to your really awesome contract
      package: 'Soroswap-library'                               # package name to build
      make_target: 'contracts/library/Makefile'                 # make target to invoke
    secrets:  # the authentication token will be automatically created by GitHub
      release_token: ${{ secrets.GITHUB_TOKEN }}                # don't modify this line
  release-soroswap-pair:
    uses: stellar-expert/soroban-build-workflow/.github/workflows/release.yml@main
    with:
      release_name: ${{ github.ref_name }}                   # use git tag as unique release name
      release_description: 'Soroswap pair contract release'  # some boring placeholder text to attach
      relative_path: '["contracts/pair"]'                    # relative path to your really awesome contract
      package: 'Soroswap-pair'                               # package name to build
      make_target: 'contracts/pair/Makefile'                 # make target to invoke
    secrets:  # the authentication token will be automatically created by GitHub
      release_token: ${{ secrets.GITHUB_TOKEN }}                # don't modify this line
  release-soroswap-router:
    uses: stellar-expert/soroban-build-workflow/.github/workflows/release.yml@main
    with:
      release_name: ${{ github.ref_name }}                     # use git tag as unique release name
      release_description: 'Soroswap router contract release'  # some boring placeholder text to attach
      relative_path: '["contracts/router"]'                    # relative path to your really awesome contract
      package: 'Soroswap-router'                               # package name to build
      make_target: 'contracts/router/Makefile'                 # make target to invoke
    secrets:  # the authentication token will be automatically created by GitHub
      release_token: ${{ secrets.GITHUB_TOKEN }}               # don't modify this line
  release-soroswap-token:
    uses: stellar-expert/soroban-build-workflow/.github/workflows/release.yml@main
    with:
      release_name: ${{ github.ref_name }}                    # use git tag as unique release name
      release_description: 'Soroswap token contract release'  # some boring placeholder text to attach
      relative_path: '["contracts/token"]'                    # relative path to your really awesome contract
      package: 'Soroswap-token'                               # package name to build
      make_target: 'contracts/token/Makefile'                 # make target to invoke
    secrets:  # the authentication token will be automatically created by GitHub
      release_token: ${{ secrets.GITHUB_TOKEN }}                # don't modify this line
